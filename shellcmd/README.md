<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# shellcmd

```go
import "github.com/princjef/mageutil/shellcmd"
```

Package shellcmd provides utilites to define and execute shell commands\.

The core construct for executing commands is the shellcmd\.Command type\, which represents a command string as it would be typed into a terminal\. Command strings follow the same quoting and escaping rules as a typical POSIX shell\, but do not perform shell expansions\.

Once a command has been created\, it can be run using the Run\(\) method\. This will print the command that is being run and will pipe its output to the terminal\.

```
err := shellcmd.Command(`go test ./...`).Run()
```

To customize the execution of a given command use Option\.

```
err := shellcmd.Command(`go test ./...`).Run(
	shellcmd.WithDir("./cmd/cli"),
	shellcmd.WithEnv("BINARY_PATH", "./default/bin/path"),
)
```

If you need to run multiple commands in sequence\, you can do so with the shellcmd\.RunAll\(\) function\. This will handle capturing errors in previous commands and skipping execution of later commands if they fail\.

```
err := shellcmd.RunAll(
	"go test -coverprofile=coverage.out ./...",
	"go tool cover -html=coverage.out",
)
```

Commands can also run in a mode that captures their output rather than piping it to the console\. This is available via the Output\(\) method\.

```
out, err := shellcmd.Command(`go test ./...`).Output()
```

## Index

- [func RunAll(commands ...Command) error](<#func-runall>)
- [type Command](<#type-command>)
  - [func (c Command) Output() ([]byte, error)](<#func-command-output>)
  - [func (c Command) Run(opts ...Option) error](<#func-command-run>)
- [type Option](<#type-option>)
  - [func WithDir(dir string) Option](<#func-withdir>)
  - [func WithEnv(key, def string) Option](<#func-withenv>)


## func [RunAll](<https://github.com/princjef/mageutil/blob/master/shellcmd/shellcmd.go#L65>)

```go
func RunAll(commands ...Command) error
```

RunAll executes all of the provided commands in sequence\, only executing the next command if the previous command succeeded\. If any of the commands fail\, the rest are not executed and the error is returned\.

## type [Command](<https://github.com/princjef/mageutil/blob/master/shellcmd/shellcmd.go#L14>)

Command defines a command which can be defined and run with output piped to stdout/stderr\.

```go
type Command string
```

### func \(Command\) [Output](<https://github.com/princjef/mageutil/blob/master/shellcmd/shellcmd.go#L36>)

```go
func (c Command) Output() ([]byte, error)
```

Output executes the command\, capturing its stdout and stderr into a \[\]byte\, which is returned when the command completes\.

### func \(Command\) [Run](<https://github.com/princjef/mageutil/blob/master/shellcmd/shellcmd.go#L18>)

```go
func (c Command) Run(opts ...Option) error
```

Run executes the command\, piping its output to stdout/stderr and reporting any errors surfaced by it\.

## type [Option](<https://github.com/princjef/mageutil/blob/master/shellcmd/options.go#L10>)

Option are functions that are passed into Run to modify the behaviour of the executed command\.

```go
type Option func(*exec.Cmd)
```

### func [WithDir](<https://github.com/princjef/mageutil/blob/master/shellcmd/options.go#L14>)

```go
func WithDir(dir string) Option
```

WithDir returns an Option to specify the working directory of the command\. If dir is the empty string\, runs the command in the calling process's current directory\.

### func [WithEnv](<https://github.com/princjef/mageutil/blob/master/shellcmd/options.go#L22>)

```go
func WithEnv(key, def string) Option
```

WithEnv returns an Option to specify the environment of the command\. First retrieves the value of the environment variable named by the key\, if not set\, uses the def value\.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
